window.paceOptions={document:!0,eventLag:!0,restartOnPushState:!0,restartOnRequestAfter:!0,ajax:{trackMethods:["POST","GET"],ignoreURLs:["searchtype","pivotresult","login","exportexcel","create","update","socket.io"]}};let ajaxutils={basegetmethod:function(t){return new Promise(function(a,e){$.ajax({url:t.url,headers:t.getauth,method:"GET",dataType:"json",success:function(t){a(t)},error:function(t){e(t)}})})},basepostmethod:function(t){return new Promise(function(a,e){$.ajax({type:"POST",url:t.url,headers:t.postauth.headers,dataType:"json",contentType:"application/json; charset=UTF-8",data:JSON.stringify(t.payload),success:function(t){a(t)},error:function(t){console.log(t),e(t)}})})},basepostmethodrawbody:function(t){return new Promise(function(a,e){$.ajax(t.url,{headers:t.postauth.headers,type:"POST",processData:!1,data:JSON.stringify(t.payload),contentType:"multipart/form-data",success:function(t){a(t)},error:function(t){console.log(t),e(t)}})})}};$(function(){baseloadsegments.populateaxiskeys(),htmlpopulate.htmlpopulatetableheader(),htmlpopulate.htmlpopulatemodal(),$("#tooglecheck1 input").change(function(){$(this).is(":checked")?($(this).next().text("without consolidated"),renderall()):(renderconsolidated(),$(this).next().text("consolidated result"))}),$("#tooglecheck6 input").change(function(){$(this).is(":checked")?($(this).next().text("dark theme ON"),darkMode()):($(this).next().text("dark theme OFF"),lightMode())}),iconsload(),$("#tooglecheck2 input").change(function(){$(this).is(":checked")?($(this).next().text("without consolidated"),renderall3d()):(renderconsolidated3d(),$(this).next().text("consolidated result"))}),$('.form-horizontal input:text ,[data-attribute="date"]').on("keydown keyup change",function(){$("#overlaycontent *[data-form-type]").length<=0?$("#btnmodalsub").prop("disabled",!1):$("#btnmodalsub").prop("disabled",!0)})});let reqops={uploadFile:function(t){return new Promise(function(a,e){var i=baseurlobj.uploaddata,n=new XMLHttpRequest,s=new FormData;n.open("POST",i,!0),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&a(n.responseText)},s.append("upload_file",t),n.setRequestHeader("x-access-token",customToken),n.send(s)})},flpupload:function(){$("#uploadfiles").click()},clearControls:function(){for(var t=document.getElementsByClassName("modal-content")[0].getElementsByTagName("input"),a=0;a<t.length;a++)"text"!=t[a].type&&"date"!=t[a].type||(t[a].value="");$("#cltrlrecordstate").prop("checked",!1),$("#overlaycontent .selectchips").remove(),$("#overlaycontent .form-group.overlaytxtalign.col-md-5 .custom-control.custom-radio ").each(function(t){$(this).find('[type="radio"]').prop("checked",!1)}),$('#overlaycontent *[data-attribute="checkboxMulti"]').each(function(t){$(this).prop("checked",!1)}),basemod_modal.customClearControl()},fileSelected:function(t){var a=t.files[0];reqops.uploadFile(a).then(function(t){$("#uploadfiles").val(""),$("#uploadsave").show(),$("#uploadsavemsg").show(),$("#notificationsid").show(),$("#uploadsavemsg").html("Data processing in progress !"),setintervalparams.id=setInterval(function(){setintervalparams.width>=24263?clearInterval(setintervalparams.id):(setintervalparams.width++,$("#lbluploadprogress").html(setintervalparams.width+"%"),$("#dvuploadprogress").css("width",setintervalparams.width+"%"),$("#uploadsave").show(),$("#uploadsave").html(setintervalparams.width+"%"))},750)})},consolidatesearch:function(){base.searchtype="consolidatesearch",base.idstatus=!0,base.excludedatecol=!0;var t=applyfields,a={};basesearcharconsolidated=[],a.consolidatecol=t,a.consolidatecolval=$("#txtconsolidatesearch").val().trim(),basesearcharconsolidated.push(a),base.datapayload=payloadprepared(),basefunction().getpaginatesearchtype(base).then(function(t){htmlpopulate.htmlpopulatetable(t),basepagination.bootpagination(t),htmlpopulate.highlightconsolidatesearch(),$("#dvreportcontainer").hasClass("collapsed-box")&&$("#rptwidget").click(),basefunction().getpaginatesearchtypeCount(base).then(function(t){htmlpopulate.htmltablecount(t)})})},ontdedit:function(t){ajaxbase.isedit=!0;var a=ajaxbase.response.rows;a=a.filter(function(a){return a[currentmoduleid]==t}),Object.keys(a[0]).map(function(t,e){var i=a[0][t];"date"==validationmap.filter(a=>a.inputname===t).map(t=>t.fieldvalidatename).toString()&&(i=moment(i).format("YYYY-MM-DD")),$("#cltrl"+t).val(i),$("#cltrl"+t).removeAttr("data-form-type")}),1==a[0].recordstate?($("#cltrlrecordstate").prop("checked",!0),base.interimdatapayload.recordstate=!0):($("#cltrlrecordstate").prop("checked",!1),base.interimdatapayload.recordstate=!1),$("#btnbutton").click()},extractDatafromfields:function(){let t={};return validationmap.forEach(function(a){t[a.inputname]=$(`[data-key-type="${a.inputname}"]`).val()}),t},btnSubmit:function(){data=this.extractDatafromfields(),ajaxbase.isedit?(data[currentmoduleid]=$("#cltrl"+currentmoduleid).val(),base.datapayload=data,base.datapayload.recordstate=void 0==base.interimdatapayload.recordstate?base.datapayload.recordstate:base.interimdatapayload.recordstate,basefunction().update(base).then(function(t){baseloadsegments.initialdatatableload(),reqops.clearControls(),$("#btnmodalclose").click()})):(delete data[currentmoduleid],base.datapayload=data,base.datapayload.recordstate=base.interimdatapayload.recordstate,basefunction().insert(base).then(function(t){baseloadsegments.initialdatatableload(),reqops.clearControls(),$("#btnmodalclose").click()}))},exportexcel:function(){base.datapayload=payloadprepared(),basefunction().exportexcel(base).then(function(t){$("#uploadfiles").val(""),$("#uploadsave").show(),$("#uploadsavemsg").show(),$("#notificationsid").show(),$("#uploadsavemsg").html("Preparing for download !"),setintervalparams.id=setInterval(function(){setintervalparams.width>=24263?clearInterval(id):(setintervalparams.width++,$("#lbluploadprogress").html(setintervalparams.width+"%"),$("#dvuploadprogress").css("width",setintervalparams.width+"%"),$("#uploadsave").html(setintervalparams.width+"%"))},750)})},srchparams:function(){base.searchtype="Columnwise",base.datapayload=payloadprepared(),basefunction().getpaginatesearchtype(base).then(function(t){htmlpopulate.htmlpopulatetable(t),basepagination.bootpagination(t),$("#dvreportcontainer").hasClass("collapsed-box")&&$("#rptwidget").click(),basefunction().getpaginatesearchtypeCount(base).then(function(t){htmlpopulate.htmltablecount(t)})})}},basepagination={bootpagination:function(t){$("#page-selection").unbind("page"),$("#page-selection").empty();var a=$("#inppagesize").val(),e=t.count,i=t.count<=100?Math.round(e/a):5;i>0&&$("#page-selection").bootpag({page:1,total:e,maxVisible:i,leaps:!0}).on("page",this.bootpagescallback)},bootpagescallback:function(t,a){return base.pageno=a-1,baseloadsegments.initialdatatableload(),!1},bootpaginationxaxis:function(t){$("#page-selection-xaxis").unbind("page"),$("#page-selection-xaxis").empty(),$("#page-selection-xaxis").bootpag({page:1,total:t.Xtotalpivotrecorset,maxVisible:5,leaps:!0}).on("page",this.bootpagescallbackxaxis)},bootpagescallbackxaxis:function(t,a){base.Xpageno=a,base.pivotinternload=!1,pivotutils.pivotreport()},bootpaginationyaxis:function(t){$("#page-selection-yaxis").unbind("page"),$("#page-selection-yaxis").empty(),$("#page-selection-yaxis").bootpag({page:1,total:t.Ytotalpivotrecorset,maxVisible:5,leaps:!0}).on("page",this.bootpagescallbackyaxis)},bootpagescallbackyaxis:function(t,a){base.Ypageno=a,base.pivotinternload=!1,pivotutils.pivotreport()}},tableops={tblchkall:function(){$("#msgchksptotalUsers").html("clear selection"),base.tblchk?(this.unchecktblall(),base.tblchk=!1,base.pageSize=base.internpageSize):(base.tblchk=!0,this.clearfieldselection(),base.internpageSize=base.pageSize,base.pageSize=parseInt($("#sptotalUsers").html()))},tablechkbox:function(t){var a=selectArr.indexOf(t);-1==a?selectArr.push(t):(selectArr.splice(a,1),multiselect.removefilterdiv(this,currentmoduleid,t)),selectArr.forEach(function(t){multiselect.assignsearchparams(currentmoduleid,t)})},clearfieldselection:function(){basesearchar=basesearchar.filter(function(t){return!Object.keys(t).includes(currentmoduleid)})},unchecktblall:function(){$("#tblchkmsg").hide(),$(".tblkchk").prop("checked",!1),selectArr=[],$("#tblselectallchk").prop("checked",!1),base.pageSize=base.internpageSize,base.tblchk=!1,this.clearfieldselection()},tblselectall:function(){$("#tblselectallchk").prop("checked")?($(".tblkchk").prop("checked",!0),$("#tblchkmsg").show(),$("#msgsppageSize").html($("#sppageSize").html()),$("#msgchksptotalUsers").html($("#sptotalUsers").html()),$(".tblkchk").each(function(){var t=$(this).data().chkType;selectArr=[],tableops.tablechkbox(t)})):($(".tblkchk").prop("checked",!1),$("#tblchkmsg").hide(),selectArr=[])},sort:function(t){var a=$(t).attr("data-field-header");$(t).find("span").toggleClass("sortorderdesc sortorderasc"),$(t).find("span").hasClass("sortorderdesc")?this.dynamicsorting(a,!0):this.dynamicsorting(a,!1)},dynamicsorting:function(t,a){var e=1==a?"DESC":"ASC";filterparam.sortcolumn=t,filterparam.sortcolumnorder=e,base.pageno=0,filterparam.pageno=base.pageno,filterparam.pageSize=base.pageSize,filterparam.ispaginate=!0,base.datapayload=filterparam,basefunction().getpaginatesearchtype(base).then(function(t){htmlpopulate.htmlpopulatetable(t),basefunction().getpaginatesearchtypeCount(base).then(function(t){htmlpopulate.htmltablecount(t)})})},onchk:function(t){$(t).prop("checked")?($(t).val(!0),base.interimdatapayload.recordstate=!0):($(t).val(!1),base.interimdatapayload.recordstate=!1),reqopsValidate.formvalidation(t)}};function payloadprepared(){return filterparam.colsearch="intercolumn",filterparam.searchparam=basesearchar,base.tblchk?(base.pageno=0,void 0==base.pageSize&&(base.pageSize=20),filterparam.ispaginate=!0):(filterparam.ispaginate=!1,base.pageno=0),filterparam.pageno=base.pageno,filterparam.pageSize=base.pageSize,filterparam.pivotparamXaxis=base.pivotparamXaxis,filterparam.pivotparamYaxis=base.pivotparamYaxis,filterparam.timeinternprimary=base.timeinternprimary,filterparam.timeinternsecondary=base.timeinternsecondary,filterparam.XpageSize=base.XpageSize,filterparam.Xpageno=base.Xpageno,filterparam.YpageSize=base.YpageSize,filterparam.Ypageno=base.Ypageno,filterparam.searchtype=base.searchtype,filterparam.datecolsearch=base.datecolsearch,filterparam.basesearcharconsolidated=basesearcharconsolidated,filterparam.sortcolumn=1,filterparam.sortcolumnorder="desc",filterparam}$(document).on("keyup",function(t){"Escape"==t.key&&validationmap.forEach(function(t){$("#dv_"+t.inputname+" ").html(" "),$("#dv_"+t.inputname+" ").hide(),$("#cltrl_filter_"+t.inputname).val("")})});let htmlPopulateCustomControl={multiCheckBoxPopulate:function(t,a){return`<div class="custom-control custom-checkbox">\n    <label><input type="checkbox" class="custom-control-input" id="cltrl${a.id}${t[a.id]}" \n    onclick="javascript:basemod_modal.on${a.name}Control(this)" \n    data-key="${a.id}"j\n    data-val="${t[a.id]}"\n    data-attribute="checkboxMulti"\n    data-parentVal="${a.name}"       \n    value="${t[a.id]}">${t[a.text]}\n    </label></div>`},validationListener:function(){var t=$("#overlaycontent input:text[data-form-type], input:checkbox[data-form-type], div[data-form-type]").length;console.log(t),t<=0?$("#btnmodalsub").prop("disabled",!1):$("#btnmodalsub").prop("disabled",!0)},multiCheckboxPopulatePrimary:function(t,a){return`<div class="form-group overlaytxtalign col-md-5" data-attribute="checkboxMulti"  data-form-type="true">\n    <div class="col-sm-15">\n           <label class="lblhide" id="lblmsg${t.id}">\n           <i class="fa fa-bell-o"></i> Please select gender\n           </label>${a}</div>\n           </div></div>`},genericCheckboxHtml:function(t){return`<input type="hidden" name="${t}" value="0" id="cltrl${t}"> \n    <div class="form-group overlaytxtalign col-md-5"><div class="col-sm-offset-2 col-sm-15"><div><label><div class="checkbox tablechk">\n   <label>\n   <div class="col-sm-15">\n                    <label class="lblhide" id="lblmsgrecordstate">\n                    <i class="fa fa-bell-o"></i> Please select Active\n                    </label>\n   <input type="checkbox" id="cltrlrecordstate" data-attribute="checkbox" data-form-type="true" onclick="javascript:tableops.onchk(this)" value="true"><span class="checkbox-material"><span class="check"></span></span> Remember me\n   <span class="checkbox-material">\n   </div>\n   </span> \n   </label>\n   </div></label></div></div></div>`},genericCheckboxHtmlPrimary:function(){return'<div class="checkbox tablechk">\n   <label>\n   <input type="checkbox" id="cltrlrecordstate" data-form-type="true" data-attribute="radio"  onclick="javascript:tableops.onchk(this)" value=true> Remember me\n   <span class="checkbox-material">\n   </span> \n   </label>\n   </div>'},genericRecordState:function(t,a){t[0].recordstate?($("#cltrlrecordstate").prop("checked",!0),$("#cltrlrecordstate").val(!0),a.datapayload.recordstate=!0,a.interimdatapayload.recordstate=!0,$("#cltrlrecordstate").removeAttr("data-form-type")):($("#cltrlrecordstate").prop("checked",!1),$("#cltrlrecordstate").val(!1),a.datapayload.recordstate=!1,a.interimdatapayload.recordstate=!1),$("#btnbutton").click()},textBoxPopulateSecondary:function(t){return`<div class="form-group overlaytxtalign col-md-5">\n    <div class="col-sm-15">\n    <label class="lblhide" id="lblmsg${t.inputname}">\n    <i class="fa fa-bell-o"></i>  ${t.inputname} is required\n    </label>\n    <input type="text" data-attribute="${t.fieldvalidatename}" class="form-control" maxLength="${t.fieldmaxlength}"\n    data-form-type="false" onkeyup="javascript:reqopsValidate.formvalidation(this)" id="cltrl${t.inputname}" placeholder="${t.inputplaceholder.capitalize()}">\n    </div></div>`},genericddlPopulate:function(t){return`<div class="form-group col-sm-6"> \n      <div class="col-sm-15">\n      <label class="lblhide" id="lblmsgddlddlmulti">\n      <i class="fa fa-bell-o"></i> Please Select ${t.inputCustomMapping} \n      </label>\n      <div onkeyup="javascript:reqopsValidate.formvalidation(this)" data-attribute="multiSelect"\n      data-key="${t.inputname}" data-form-type="false" id="in${t.inputtextval}"></div>\n      </div></div>`},customRadioPopulate:function(t,a){return`<div class="custom-control custom-radio">\n      <label><input type="radio" class="custom-control-input" id="cltrl${a.id}${t[a.id]}" \n      onclick="javascript:basemod_modal.on${a.name}Control(this)" \n      data-key="${a.id}"\n      name="customRadio${a.name}"\n      data-val="${t[a.id]}"  \n      value="${t[a.id]}">${t[a.text]}\n      </label></div>`},customRadioPopulatePrimary:function(t,a){return`<div class='form-group overlaytxtalign col-md-5' onclick="javascript:reqopsValidate.formvalidation(this)" data-attribute="radio" data-form-type="true">\n      <div class="col-sm-15">\n                    <label class="lblhide" id="lblmsg${t.id}">\n                    <i class="fa fa-bell-o"></i> Please select gender\n                    </label>\n      ${a}</div></div>`},genericMultiControlpayload:function(t,a,e,i){var n={recordstate:t.interimdatapayload.recordstate};let s={...Object.fromEntries(Object.entries(a.datapayload).map(([t,a])=>[t,datatransformutils.flat(a)])),...n};var r=datatransformutils.getCartesian(s);if(console.log(ajaxbase.isedit),ajaxbase.isedit){return console.log(e),e.forEach(function(a,e){void 0==r[e]?(t.datapayload={delObj:{[i]:a}},basefunction().deleterecord(t).then(function(t){})):r[e][i]=a}),r.forEach(function(a,e){Object.keys(a).includes(i)||(t.datapayload=a,basefunction().singleInsert(t).then(function(t){}),delete r[e])}),t.datapayload=r.filter(Boolean),t}{let a={payset:r};return t.datapayload=a,t}}};String.prototype.capitalize=function(){return this.replace(/(^|\s)([a-z])/g,function(t,a,e){return a+e.toUpperCase()})};let multiselect={searchbarautocomplete:function(t){let a={},e=[],i=$(t).val(),n=$(t).data("multipleselect-autocomplete"),s=$(t).data("multipleselect-autocomplete-key");this.appendautopopulate(t,s),t.position=n,a[n]=i.toLowerCase();let r=[];e.push(a),basesearchar.length>0&&(r.push(basesearchar),r=datatransformutils.removeJsonAttrs(r[0],[s]),r=0==Object.keys(r[0]).length?[]:r),filterparam.pageno=0,filterparam.pageSize=20,filterparam.searchtype="Columnwise",filterparam.searchparam=e,filterparam.searchparamkey=s,r=r.filter(t=>0!==Object.keys(t).length),filterparam.searchparammetafilter=r,filterparam.ispaginate=!0,base.datapayload=filterparam;var o=basesearchar;basefunction().getpaginatesearchtypegroupby(base).then(function(t){$("#dv_"+s+" ").html(" "),$("#dv_"+s+" ").hide();let a=t.rows;if(o.length>0){var e=o.map(function(t){return t[s]})[0];void 0!=e?a=a.filter(t=>!e.includes(t[s].toString().toLowerCase())):(console.log(a),console.log("something is undefined "))}let i="";a.forEach(function(t){i+='<div><a class="highlightselect" href=\'javascript:multiselect.onsearchtext("'+s+'","'+t[n].toString().toLowerCase()+'","'+t[s].toString().toLowerCase()+"\");'>"+t[n]+"  </a></div>"});$("#dv_"+s).html(i),$("#dv_"+s).show()}).catch(function(t){console.log(t)})},appendautopopulate:function(t,a){$('<div id="cltrl_filter_chips_'+a+'"></div><div id="dv_'+a+'" class="srchpara"></div>').insertAfter($(t))},onsearchtext:function(t,a,e){$("#dv_"+t).html(" "),$("#dv_"+t).hide(),$("#cltrl_filter_"+t).val(""),this.assignsearchparams(t,e),$("#cltrl_filter_chips_"+t).append('<div class="selectchips"><span ID="cltrl_filter_span_'+t+'" onclick=\'javascript:multiselect.removefilterdiv(this,"'+t+'", "'+e+'");\' class="select2choiceremove" role="presentation">×</span>'+a.capitalize()+"</div>")},assignsearchparams:function(t,a){var e=[];if(isNaN(a)?(a=a.toLowerCase(),e.push(a)):e.push(a),basesearchar.filter(function(a){return void 0!=a[t]}).length>0){var i=basesearchar;i=i.filter(function(a){return void 0!=a[t]}).map(function(e){return{[t]:e[t].concat(a)}}),this.updateNameById(basesearchar,t,i[0][t])}else basesearchobj[t]=e,basesearchar.push(basesearchobj),basesearchobj={}},removefilterdiv:function(t,a,e){$(t).parent().remove();var i=basesearchar;i=i.filter(function(t){return void 0!=t[a]}).map(function(t){return{[a]:t[a].remByVal(e)}}),this.updateNameById(basesearchar,a,i[0][a]),i[0][a].length<=0&&(basesearchar=datatransformutils.removeJsonAttrs(basesearchar,[a])),basesearchar=basesearchar.filter(t=>0!==Object.keys(t).length)},fieldfilters:function(t){$(t).children().hasClass("fa-plus")?($(".fieldsfilterbar").slideToggle(300),$(t).children().removeClass("fa-plus").addClass("fa-minus")):($(".fieldsfilterbar").slideToggle(300),$(t).children().removeClass("fa-minus").addClass("fa-plus"))},updateNameById:function(t,a,e){Object.keys(t).some(function(i){if(void 0!=t[i][a])return t[i][a]=e,!0})},removeFromArray:function(t,a){var e=basesearchar;e=e.filter(function(a){return void 0!=a[t]}).map(function(e){return{[t]:e[t].remByVal(a)}}),this.updateNameById(basesearchar,t,e[0][t]),basesearchar=basesearchar.filter(t=>0!==Object.keys(t).length)}},selectArr=[],basesearchobj={},basesearchar=new Array,basesearcharconsolidated=new Array,basedataset={},base={appkey:location.hostname+(location.port?":"+location.port:""),config:{headers:{"x-access-token":customToken}},timeinternprimary:"Month",timeinternsecondary:"Month",XpageSize:40,Xpageno:0,YpageSize:20,Ypageno:0,pivotinternload:!0,searchtype:"NoFilter",interimdatapayload:{}},ajaxurl={auth:"/getToken"},ajaxbase={postauth:base.config},setintervalparams={width:1,id:""},host=location.protocol.concat("//").concat(window.location.hostname),socket=io.connect();socket.on("news",function(t){new Date;clearInterval(setintervalparams.id);var a=setintervalparams.width,e=setInterval(function(){101===++a?(clearInterval(e),a=0,setintervalparams.width=0,$("#uploadsavemsg").html(t+" records are inserted ! ")):($("#lbluploadprogress").html(a+"%"),$("#dvuploadprogress").css("width",a+"%"),$("#uploadsave").html(a+"%"))},20)});var l=0;socket.on("newsdownloadsets",function(t){var a=t.replace(".csv","");clearInterval(setintervalparams.id);var e=setintervalparams.width;l+=1;var i=10*parseInt(l)+"%";$("#dt-prg").attr("data-progress",l+"/10"),$("#dt-prg").show(),$("#dt-prg").attr("style","--progress:"+i+" ");var n=setInterval(function(){101===++e?(clearInterval(n),e=0,setintervalparams.width=0,$("#libasenotifications").hide(),$("#libasenotificationrow").show(),$("#spn_dv"+a).hide(),$("#dv_set_progress"+a).before('<a href="../exportCsv/'+t+'"><i class="fa fa-download text-aqua"></i> <span  style="white-space: normal !important;">'+t+"</span></a>"),$("#uploadsave").hide()):($("#uploadsave").show(),$("#lbluploadprogress"+a).html(e+"%"),$("#dvuploadprogress"+a).css("width",e+"%"),$("#uploadsave").html(e+"%"))},20)}),socket.on("newsdownload",function(t){socket.emit("end")}),socket.on("newsdownloadsetprogressstats",function(t){$("#libasenotifications").hide(),$("#libasenotificationrow").show();var a=t.filenames,e=t.count<=0?40:parseInt(t.count);$("#libasenotificationrow").append('<span style="color: #28669c;" id="spn_dv'+a+'">Data processing in progress !</span><div style="margin:0 0 0 15px" id="dv_set_progress'+a+'"><small class="pull-right"><label id="lbluploadprogress'+a+'">%</label></small><div class="progress xs"><div class="progress-bar progress-bar-aqua" id="dvuploadprogress'+a+'" style="width: 20%;" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div></div><div class="ripple-container"><div class="ripple ripple-on ripple-out" style="left: 205.203px; top: 42px; background-color: rgb(33, 150, 243); transform: scale(32.875);"></div></div></div>'),clearInterval(setintervalparams.id),setintervalparams.id=setInterval(function(){setintervalparams.width>=e?(clearInterval(id),setintervalparams.width=0):(setintervalparams.width++,$("#lbluploadprogress"+a).html(setintervalparams.width+"%"),$("#dvuploadprogress"+a).css("width",setintervalparams.width+"%"),$("#uploadsave").show(),$("#uploadsave").html(setintervalparams.width+"%"))},750),setintervalparams.width=0}),socket.on("newsrecordset",function(t){$("#uploadnotification").html(t)});let validations={string:[/^[a-zA-Z ]+$/,"Please enter valid  name"],number:[/^[0-9]+$/,"Please enter valid number"],email:[/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,"Please enter a valid email address"],mobile:[/^(\+\d{1,3}[- ]?)?\d{10}$/,"Please enter a valid mobile number"],password_set1:[/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,"Please enter Minimum eight characters, at least one letter and one number"],password_set2:[/^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/,"Please enter Minimum eight characters, at least one letter, one number and one special character"],password_set3:[/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"Please enter Minimum eight characters, at least one uppercase letter, one lowercase letter and one number"],password_set4:[/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,}/,"Please enter Minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"],password_set4:[/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,10}/,"Please enter Minimum eight and maximum 10 characters, at least one uppercase letter, one lowercase letter, one number and one special character"],date:[/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]|(?:Jan|Mar|May|Jul|Aug|Oct|Dec)))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2]|(?:Jan|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec))\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)(?:0?2|(?:Feb))\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9]|(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep))|(?:1[0-2]|(?:Oct|Nov|Dec)))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/,"Please enter valid date"],alphaNumeric:[/^[a-z0-9]+$/i,"Please enter Valid Alpha numeric String"],showCSS:"control-label-format",hideCSS:"lblhide",hideCSSlbl:"lblhide"},reqopsValidate={formvalidation:function(t){var a=$(t).attr("data-attribute"),e={};e.content=t,e.contenttype=a,baseobjvalidation.validationinterface(e)}};var baseobjvalidation={emailvalidation:function(t){validation=new RegExp(validations.email[0]),validation.test(t.value)?($(t).parent().find("label").attr("class",validations.hideCSS),$(t).removeAttr("data-form-type")):($(t).parent().find("label").attr("class",validations.showCSS),$(t).attr("data-form-type","true")),this.validationListener()},numbervalidation:function(t){validation=new RegExp(validations.number[0]),validation.test(t.value)?($(t).parent().find("label").attr("class",validations.hideCSS),$(t).removeAttr("data-form-type")):($(t).parent().find("label").attr("class",validations.showCSS),$(t).attr("data-form-type","true")),this.validationListener()},mobilevalidation:function(t){validation=new RegExp(validations.mobile[0]),validation.test(t.value)?($(t).parent().find("label").attr("class",validations.hideCSS),$(t).removeAttr("data-form-type")):($(t).parent().find("label").attr("class",validations.showCSS),$(t).attr("data-form-type","true")),this.validationListener()},passwordvalidation:function(t){validation=new RegExp(validations.password_set1[0]),validation.test(t.value)?($(t).parent().find("label").attr("class",validations.hideCSS),$(t).removeAttr("data-form-type")):($(t).parent().find("label").attr("class",validations.showCSS),$(t).attr("data-form-type","true")),this.validationListener()},textvalidation:function(t){validation=new RegExp(validations.string[0]),validation.test(t.value)?($(t).parent().find("label").attr("class",validations.hideCSS),$(t).removeAttr("data-form-type")):($(t).parent().find("label").attr("class",validations.showCSS),$(t).attr("data-form-type","true")),this.validationListener()},alphaNumericValidation:function(t){validation=new RegExp(validations.alphaNumeric[0]),validation.test(t.value)?($(t).parent().find("label").attr("class",validations.hideCSS),$(t).removeAttr("data-form-type")):($(t).parent().find("label").attr("class",validations.showCSS),$(t).attr("data-form-type","true")),this.validationListener()},checkboxvalidation:function(t){$(t).is(":checked")?($(t).parent().find("label").attr("class",validations.hideCSS),$(t).removeAttr("data-form-type")):($(t).parent().find("label").attr("class",validations.showCSS),$(t).attr("data-form-type","true")),this.validationListener()},validationListener:function(){$("#overlaycontent *[data-form-type]").length<=0?$("#btnmodalsub").prop("disabled",!1):$("#btnmodalsub").prop("disabled",!0)},checkboxvalidationMulti:function(t){$(t).is(":checked")?($(t).parents(":eq(2)").find(`.${validations.showCSS}`).attr("class",validations.hideCSSlbl),$(t).parents(":eq(4)").find(".form-group").removeAttr("data-form-type")):this.checkboxvalidationSecondary(t)&&($(t).parents(":eq(2)").find(`.${validations.hideCSSlbl}`).attr("class",validations.showCSS),$(t).parents(":eq(4)").find(".form-group").attr("data-form-type","true"))},checkboxvalidationSecondary:function(argument){var namesake=`current${$(argument).attr("data-parentVal")}`,condt=eval(namesake).data[$(argument).attr("data-key")].length;return condt<=0},radiovalidation:function(t){$(t).removeAttr("data-form-type"),this.validationListener()},datevalidation:function(t){validation=new RegExp(validations.date[0]),validation.test(t.value)||""==t.value?($(t).parent().find("label").attr("class",validations.showCSS),$(t).attr("data-form-type","true")):($(t).parent().find("label").attr("class",validations.hideCSS),$(t).removeAttr("data-form-type"))},genvalidation:function(t){""==t.value?($(t).parent().find("label").attr("class",validations.hideCSS),$(t).removeAttr("data-form-type")):($(t).parent().find("label").attr("class",validations.showCSS),$(t).attr("data-form-type","true"))},multiSelectValidation:function(t){var a=$(t).attr("data-key");Array.isArray(multiselects[a])&&multiselects[a].length?($(t).parent().find("label").attr("class",validations.hideCSS),$(t).removeAttr("data-form-type")):($(t).parent().find("label").attr("class",validations.showCSS),$(t).attr("data-form-type","true"))},validationinterface:function(t){switch(t.contenttype){case"email":this.emailvalidation(t.content);break;case"number":this.numbervalidation(t.content);break;case"mobile":this.mobilevalidation(t.content);break;case"string":this.textvalidation(t.content);break;case"alphaNumericValidation":this.alphaNumericValidation(t.content);break;case"checkbox":this.checkboxvalidation(t.content);break;case"checkboxMulti":this.checkboxvalidationMulti(t.content);break;case"radio":this.radiovalidation(t.content);break;case"passwordvalidation":this.passwordvalidation(t.content);break;case"multiSelect":this.multiSelectValidation(t.content);break;case"date":this.datevalidation(t.content);break;default:this.genvalidation(t.content)}}};let datatransformutils={findAndRemove:function(t,a,e){t.forEach(function(i,n){i[a]===e&&t.splice(n,1)})},staticValsMapping:function(t,a){var e=validationmap.filter(a=>a.inputtypemod==t);if(!Array.isArray(e)||!e.length)return a;if(void 0!=e[0].childcontent){var i=a.includes(",")?a.split(","):a,n=[];return Array.isArray(i)&&i.length?(i.forEach(function(t){n.push(e[0].childcontent.filter(a=>a.val==t)[0].text)}),n.join(",")):e[0].childcontent.filter(t=>t.val==i)[0].text}},rename:function(t,a,e){return!!t.hasOwnProperty(a)&&(t[e]=t[a],delete t[a],!0)},removeJsonAttrs:function(t,a){return JSON.parse(JSON.stringify(t,function(t,e){return-1!==a.indexOf(t)?void 0:e}))},getCartesian:function(t){return Object.entries(t).reduce((t,[a,e])=>{var i=[];return t.forEach(t=>(Array.isArray(e)?e:[e]).forEach(e=>(e&&"object"==typeof e?datatransformutils.getCartesian(e):[e]).forEach(e=>i.push(Object.assign({},t,{[a]:e}))))),i},[{}])},flat:t=>t&&"object"==typeof t?Object.values(t).flatMap(datatransformutils.flat):t,getparentchildAR:function(t){var a=Object.keys(t[0])[0];return{[a]:t.map(t=>t[a])}},isNumberKey:function(t){var a=t.which?t.which:t.keyCode;return!(46!=a&&a>31&&(a<48||a>57))},editMultiSelect:function(t){var a=t.validationmap.filter(t=>"multiselect"==t.inputtype);t.content.map(function(e){return a.map(function(a){var i={};return t.multiselectfunc[a.inputtextval].destroy(a.inputtextval),-1!=e[a.inputCustomMapping].indexOf(",")?(isNaN(parseInt(e[a.inputname].split(",")[0]))?multiselects[a.inputname]=[{[a.inputtextval]:e[a.inputname].split(",")}]:multiselects[a.inputname]=[{[a.inputtextval]:e[a.inputname].split(",").map(Number)}],i[a.inputtextval]=e[a.inputCustomMapping].split(",").map(function(t,i){return{key:a.inputtextval,text:void 0!=a.childcontent?datatransformutils.staticValsMapping(a.inputCustomMapping,t):t,vals:isNaN(parseInt(e[a.inputname].split(",")[i]))?e[a.inputname].split(",")[i]:parseInt(e[a.inputname].split(",")[i])}})):(isNaN(parseInt(e[a.inputname]))?multiselects[a.inputname]=[{[a.inputtextval]:[e[a.inputname]]}]:multiselects[a.inputname]=[{[a.inputtextval]:[parseInt(e[a.inputname])]}],i[a.inputtextval]={key:a.inputtextval,text:void 0!=a.childcontent?datatransformutils.staticValsMapping(a.inputCustomMapping,e[a.inputCustomMapping]):e[a.inputCustomMapping],vals:isNaN(parseInt(e[a.inputname]))?e[a.inputname]:parseInt(e[a.inputname])}),i})})[0];a.forEach(function(a){var e=a.inputtextval;t.content[0][a.inputParent].forEach(function(a){t.multiselectfunc[e].onsearchtext(a)})})},getminusincrement:function(t,a){var e=[],i=parseInt(t-a);return[...Array(i).keys()].forEach(function(a){e.push(parseInt(t-=1))}),e},addArrayinJson:function(t,a,e){var i=[];i.push(e);var n={};n[a]=i;var s=t.filter(function(t){return Object.keys(t).find(t=>t==a)});return s.length>0?t=s.map(function(t){return t[a].push(e),t}):t.push(n),t}};const equijoin=(t,a,e,i,n)=>{const s=t.reduce((t,a)=>t.set(a[e],a),new Map);return a.map(t=>n(s.get(t[i]),t))};String.prototype.contains||(String.prototype.contains=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),Array.prototype.exclude=function(t){return this.filter(function(a){return t.indexOf(a)<0})},Array.prototype.remove=function(){for(var t,a,e=arguments,i=e.length;i&&this.length;)for(t=e[--i];-1!==(a=this.indexOf(t));)this.splice(a,1);return this},Array.prototype.moveUp=function(t,a){var e=this.indexOf(t),i=e-(a||1);if(-1===e)throw new Error("Element not found in array");i<0&&(i=0),this.splice(e,1),this.splice(i,0,t)},Array.prototype.remByVal=function(t){for(var a=0;a<this.length;a++)this[a]===t&&(this.splice(a,1),a--);return this};const doChunk=(t,a)=>t.reduce((t,e)=>(t.length&&t[t.length-1].length!==a?t[t.length-1].push(e):t.push([e]))&&t,[]);Array.prototype.forEach2=function(t){for(var a=this.length,e=0;e<a;e++)t(this[e],e)},Array.prototype.map2=function(t){for(var a=this.length,e=new Array(a),i=0;i<a;i++)e[i]=t(this[i],i);return e},$.fn.formToJSON=function(){var t={},a=function(t,e,i){var n=e.shift();0==e.length?function(t,a,e){null!=t[a]?(t[a].push||(t[a]=[t[a]]),e.includes("[")?(e=isNaN(parseInt(e))?e:parseInt(e),t[a].push(JSON.parse(e)[0])):t[a].push(e)):e.includes("[")?(e=isNaN(parseInt(e))?e:parseInt(e),t[a]=JSON.parse(e)):t[a]=e}(t,n,i):(null==t[n]&&(t[n]={}),a(t[n],e,i))};return this.each(function(e,i){var n=$(i).val()||"",s=i.id.replace(/:\d*/g,"").split(".");a(t,s,n)}),t},RegExp.escape=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};let cartesianProduct=function(t){return t.reduce(function(t,a){return t.map(function(t){return a.map(function(a){return t.concat(a)})}).reduce(function(t,a){return t.concat(a)},[])},[[]])},htmlpopulate={htmltablecount:function(t){$("#sptotalUsers").html(t.count)},highlightconsolidatesearch:function(){$("#basetable tr").children();var t=$("#txtconsolidatesearch").val();""!=t&&this.highlightTextinHtml(t)},htmlpopulatemodal:function(){$("#overlaycontent").html(" "),base.idstatus=!0;baseloadsegments.moduleattributepopulate();var t="";validationmap.forEach(function(a){var e="string"!=a.fieldvalidatename?a.fieldvalidatename:"string",i="string"!=a.fieldvalidatename?"onchange":"onkeyup";t+='<div class="form-group overlaytxtalign col-md-5"><div class="col-sm-15"><label class="lblhide" id="lblmsg'+a.inputname+'"><i class="fa fa-bell-o"></i> Input with warning</label><input type="'+e+'" data-key-type="'+a.inputname+'"  data-attribute="'+a.fieldvalidatename+'" class="form-control" maxLength="'+a.fieldmaxlength+'" data-form-type="false" '+i+'="javascript:reqopsValidate.formvalidation(this)" id="cltrl'+a.inputname+'" placeholder="'+a.inputname.replace("_"," ").capitalize()+'"></div></div>'});var a=' <input type="hidden" name="'+currentmoduleid+'" value="0" data-attribute="checkbox"  id="cltrl'+currentmoduleid+'"> <div class="form-group overlaytxtalign col-md-5"><div class="col-sm-offset-2 col-sm-15"><div><label>'+this.baseCheckbox;$("#overlaycontent").html(t+a)},baseCheckbox:'<div class="checkbox tablechk">\n     <label>\n     <input type="checkbox" id="cltrlrecordstate" data-form-type="true"  data-attribute="checkbox" onclick="javascript:tableops.onchk(this)" value=true> Remember me\n     <span class="checkbox-material">\n     </span> \n     </label>\n     </div>',htmlpopulatetableheader:function(){$("#basetable thead tr").html(""),base.idstatus=!0;var t="";applyfields.forEach(function(a){t+=' <th onclick="tableops.sort(this)" data-field-header="'+a+'"><span class=" sortorderasc fa fa-fw"></span>'+a.replace("_"," ").capitalize()+"</th>"}),$("#basetable thead tr").html('<th style="display:none;">ID</th><th style="width: 10%" ;><div class="checkbox tablechk"><label><input type="checkbox" id="tblselectallchk" onclick="javascript:tableops.tblselectall();"><span class="checkbox-material"></span> Check all</label></div></th>'+t)},htmlpopulatefilterbar:function(){basesearchar=[],$("#dvfilterbar  div.fieldsfilterbar").html(""),$("#dvfilterbar  div.fieldsfilterbarconsolidated").html(""),base.idstatus=!0;var t=applyfields,a="";t.forEach(function(t){var e=validationmap.filter(function(a){return a.inputtextval==t}).map(function(t){return t.inputname})[0];a+='<div style="display: inline-block;"><input type="text" style="width:45%;" class="form-control"data-multipleselect-autocomplete-key="'+(e=void 0!=e?e:t)+'" data-multipleselect-autocomplete="'+t+'" id="cltrl_filter_'+e+'" oninput="multiselect.searchbarautocomplete(this)" placeholder="'+t.replace("_"," ")+'"></div>'}),$("#dvfilterbar div.fieldsfilterbar").html(a),$("#dvfilterbar div.fieldsfilterbar").append('<div style="display: inline-block;"><div class="zoom-menu"><a class="zoom-fab zoom-btn-sm zoom-btn-report scale-transition" onclick="javascript:reqops.srchparams();"><i class="fa fa-bolt"></i></a></div></div>'),$("#dvfilterbar div.fieldsfilterbarconsolidated").append('<div style="display: inline-block;float:right;"><div class="input-group input-group-sm input-group-sm-override" style="width: 150px;"><div class="form-group "><input type="text" id="txtconsolidatesearch" name="table_search" class="form-control pull-right" placeholder="Search"></div><div class="input-group-btn"><button type="submit" onclick="javascript:reqops.consolidatesearch();" class="btn btn-default"><i class="fa fa-search"></i></button></div></div></div>'),$("#dvfilterbar div.fieldsfilterbarconsolidated").append('<div style="display: inline-block;float: right;padding-right: 30px;"><a class="zoom-fab zoom-btn-sm zoom-btn-report scale-transition" onclick="javascript:multiselect.fieldfilters(this)"><i class="fa fa-plus" ></i></a></div>'),t.forEach(function(t){t.includes("date")&&$("#cltrl_filter_birth_date").parent().remove()})},htmlpopulatetable:function(t){$("#basetable tbody").children().remove();var a=t.rows;t.count;if(a.length>0){console.log(base.pageno),$("#spcurrentPage").html(base.pageno),$("#sppageSize").html(base.pageSize),$("#sptotalUsers").html(t.count),base.idstatus=!1,base.excludedatecol=!1;var e=applyfields,i="";e.map(t=>Object.values(t)).toString();a=alasql("SELECT "+e+", "+[currentmoduleid]+" FROM ? ",[a]);var n=datatransformutils.removeJsonAttrs(a,["updated_date"]),r=(n=datatransformutils.removeJsonAttrs(n,["created_date"]),n=datatransformutils.removeJsonAttrs(n,["recordstate"]),Object.keys(n[0]).remove(currentmoduleid));for(s of a){$("#basetable tbody ").append("<tr>");var o='<div class="checkbox tablechk" ><label><input type="checkbox" data-chk-type="'+s[currentmoduleid]+'" class="tblkchk"  onclick="javascript:tableops.tablechkbox('+s[currentmoduleid]+')"><span class="checkbox-material"><span class="check"></span></span> </label></div>';for(f of($("#basetable tbody tr").last().append("<td>"+o+"</td>"),r))i=f.includes("date")?moment(s[f],"YYYY-MM-DD[T]HH:mm:ss").format("DD MMM YYYY"):s[f],isStaticMappingCheckpoint=validationmap.filter(t=>void 0!=t.childcontent).length<=0?i:datatransformutils.staticValsMapping(f,i),$("#basetable tbody tr").last().append("<td>"+isStaticMappingCheckpoint+"</td>");$("#basetable tbody tr").last().append('<td  data-tbledit-type="'+s[currentmoduleid]+'" onclick=javascript:reqops.ontdedit('+s[currentmoduleid]+")><a class='edithover' href='javascript:void(0);'>edit</a></td>")}}this.tblvisiblity(),basemod_modal.afterhtmlpopulate(),$("#divreportcontent").show()},tblvisiblity:function(){var t=$("#basetable thead th").length,a=$("#basetable tbody tr:eq(0) td").length;a>0&&datatransformutils.getminusincrement(a,t).forEach2(function(t){$("#basetable tbody tr td:nth-child("+t+")").hide()})},highlightTextinHtml:function(t,a){if(t){a=$("#basetable");var e=new RegExp("("+RegExp.escape(t)+")","gi"),i="<span class='highlightedsearch'>"+t+"</span>";$("*",a).contents().each(function(t,a){if(3===a.nodeType){var n=a.data;if(n=n.replace(e,i)){var s=$("<span>").html(n);$(a).before(s.contents()).remove()}}})}},dehighlightinHtml:function(t,a){var e=document.createTextNode(t);$("span.highlightedsearch",a).each(function(){this.parentNode.replaceChild(e.cloneNode(!1),this)})}},baseloadsegments={initialdatatableload:function(){filterparam.searchparam=["NA"],filterparam.searchtype="NoFilter",filterparam.daterange=base.searchdatefilter,base.pageno=void 0===base.pageno?0:base.pageno,base.pageSize=void 0===base.pageSize?20:base.pageSize,filterparam.pageno=base.pageno,filterparam.pageSize=base.pageSize,filterparam.datecolsearch=base.datecolsearch,base.datapayload=filterparam,$("#dvreportcontainer").show(),$("#dvparentfilterbar").show(),$("#dvreportcontainer").addClass("loading-report-container"),basefunction().getpaginatesearchtype(base).then(function(t){htmlpopulate.htmlpopulatetable(t),$("#dvreportcontainer").hasClass("collapsed-box")&&$("#rptwidget").click(),$("#dvreportcontainer").removeClass("loading-report-container"),basefunction().getpaginatesearchtypeCount(base).then(function(t){htmlpopulate.htmltablecount(t)})})},getapptoken:function(t){return basedataset.appkey=base.appkey,t.url=ajaxurl.auth,t.payload=basedataset,new Promise(function(a,e){ajaxutils.basepostmethod(t).then(baseloadsegments.setconfig).then(function(t){a(t)}).catch(function(t){console.log(t)})})},setconfig:function(t){return new Promise(function(a,e){ajaxbase.postauth.headers["x-access-token"]=t.token,a(ajaxbase)})},moduleattributepopulate:function(){var t=moduleattributes.split(",");(t.remove("updated_date").remove("created_date").remove("recordstate"),base.idstatus&&t.remove(currentmoduleid),base.excludedatecol)&&(t=t.filter(function(t){return!t.includes("date")}));return t},populateaxiskeys:function(){base.idstatus=!0,base.excludedatecol=!1,base.moduleattributes=applyfields,$("#selxaxis").append("<option></option>"),base.moduleattributes.forEach(function(t){$("#selxaxis").append("<option value = "+t+">"+t.replace("_"," ").capitalize()+"</option>")}),$("#selxaxis").select2({placeholder:"Select a horizontal ( xaxis ) paramaters",allowClear:!0}),$("#selyaxis").append("<option></option>"),base.moduleattributes.forEach(function(t){$("#selyaxis").append("<option value = "+t+">"+t.replace("_"," ").capitalize()+"</option>")}),$("#selyaxis").select2({placeholder:"Select a vertical ( yaxis ) paramaters",allowClear:!0});var t=moduleattributes.split(",").filter(function(t){return t.includes("date")}).filter(function(t){return!t.includes("update")});$("#seldatefields").append("<option></option>"),t.forEach(function(t){$("#seldatefields").append("<option value = "+t+">"+t.replace("_"," ").capitalize()+"</option>")}),$("#seldatefields").select2({placeholder:"Select date field",allowClear:!0}),$("#seldatefields").val("created_date"),$("#seldatefields").trigger("change")},basePopulateMultiControlsPopulate:function(t,a){return t.filter(function(t){return t.inputtypemod==a}).map(function(t){return t.inputtypeVal})[0]},basePopulateMultiControls:function(t){return{searchparam:[{[t]:""}],searchparamkey:t,searchtype:"Columnwise",searchparammetafilter:[],pageno:0,pageSize:20}}},pivotutils={pivotreport:function(){base.datapayload=payloadprepared(),basefunction().getpivotreport(base).then(function(t){pivotutils.processpivotresponse(t);var a=[];for(i=0;i<=base.tablecontent_rows.length-1;i++){var e=base.tablecontent_rows[i],n={};Object.keys(base.tablecontent_rows[i]).forEach(function(t){var a=e[t];n[t]=isNaN(parseInt(a))?0:parseInt(a)}),a.push(n),n={}}base.tablecontent_rows_consolidate=a,pivotutils.tblpivotyaxis(base),pivotutils.tblpivotxaxis(base),base.pivotinternload&&(base.internaxis.length-1!=base.Xtotalpivotrecorset?(basepagination.bootpaginationxaxis(base),$("#dvaxis").css("overflow-x","scroll"),$("#dvaxis").css("margin-top","0%")):$("#page-selection-xaxis").html(""),base.Ytotalpivotrecorset!=base.table_rows.length-1?(basepagination.bootpaginationyaxis(base),$("#dvaxis").css("overflow-x","scroll")):$("#page-selection-yaxis").html("")),initcharts(base.internaxis,base.yaxisarray),init3dcharts(base),pivotutils.drilldownpieparent(),$("#btnPivotDownload").show()})},drilldownpieparent:function(){var t=base.rawpivotdata.rows,a=t.filter(function(t){return"total"!==t.yaxis}).map(function(t){return{name:t.yaxis,y:parseInt(t.subtotal),drilldown:t.yaxis}}),e=t.filter(function(t){return"total"!==t.yaxis}).map(function(t){var a=Object.keys(t).filter(function(t){return"yaxis"!=t&&"subtotal"!=t}).map(function(a){var e=[];return e.push(a),e.push(null===t[a]?0:parseInt(t[a])),e});return{name:t.yaxis,id:t.yaxis,data:a}});base.parentdrilldown=a,base.childrendrilldown=e,populatepiechart(base)},tblpivotyaxis:function(t){var a=t.table_cols,e=t.table_rows;for(f of($("#tblpivotcol thead").html(" "),$("#tblpivotcol tbody").html(" "),$("#tblpivotcol thead ").append("<tr>"),a))$("#tblpivotcol thead tr").last().append("<th>"+f+"</th>").fadeIn("slow");for(s of e)for(f of($("#tblpivotcol tbody ").append("<tr>"),a))$("#tblpivotcol tbody tr").last().append("<td>"+s[f]+"</td>").fadeIn("slow")},tblpivotxaxis:function(t){var a=t.tablecontent_cols,e=t.tablecontent_rows_consolidate;for(f of($("#tblpivotxaxis thead").html(" "),$("#tblpivotxaxis tbody").html(" "),$("#tblpivotxaxis thead ").append("<tr>"),a))$("#tblpivotxaxis thead tr").last().append("<th>"+f+"</th>").fadeIn("slow");for(s of e)for(f of($("#tblpivotxaxis tbody ").append("<tr>"),a))$("#tblpivotxaxis tbody tr").last().append("<td>"+s[f]+"</td>").fadeIn("slow")},processpivotresponse:function(t){var a=t;if(base.rawpivotdata=t,a.rows.length>0){var e=datatransformutils.removeJsonAttrs(a.rows,["interncolumn"]),i=datatransformutils.removeJsonAttrs(a.rows,["interncolumn"]).map(function(t){return{Monthsegregation:t.yaxis}}),n=datatransformutils.removeJsonAttrs(e,["yaxis"]),s=[],r={};for(index=0;index<n.length;++index){var o=n[index],l=Object.keys(o).filter(t=>"subtotal"!=t).map(function(t){return isNaN(parseInt(o[t]))?0:parseInt(o[t])});r.name=i[index].Monthsegregation,r.data=l,s.push(r),r={}}var c=Object.keys(n[0]);base.internaxis=c,base.yaxisarray=s,base.table_rows=i,base.table_cols=Object.keys(i[0]),base.tablecontent_rows=n,base.tablecontent_cols=Object.keys(n[0]),base.Xtotalpivotrecorset=a.Xcount,base.Ytotalpivotrecorset=a.Ycount,base.subtotal=a.totaldoc}},setselxaxis:function(){base.pivotparamXaxis=$("#selxaxis").val();var t=base.pivotparamXaxis;base.Ypageno=0,base.Xpageno=0,base.pivotinternload=!0,t.includes("date")?($("#chkprimary").css("visibility","visible"),$("#chkprimary").css("height","")):($("#chkprimary").css("visibility","hidden"),$(".rptbasediv").css("height","10px"),base.timeinternsecondary="")},setselyaxis:function(){base.pivotparamYaxis=$("#selyaxis").val(),base.Ypageno=0,base.Xpageno=0,base.pivotinternload=!0,base.pivotparamYaxis.includes("date")?$("#chksecondary").css("visibility","visible"):($("#chksecondary").css("visibility","hidden"),base.timeinternprimary="")},setseldatefields:function(){base.datecolsearch=$("#seldatefields").val(),$(".topdatepicker").show()},exportexcelPivot:function(){var t=Papa.unparse(base.rawpivotdata.rows),a=currentmodulename+".csv",e=new Blob([t],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(e,a);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(e),i.setAttribute("download",a),document.body.appendChild(i),i.click(),document.body.removeChild(i)}}};